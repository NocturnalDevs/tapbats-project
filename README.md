## Running the Project Locally

1. **Clone the GitHub Repository**
   First, clone the repository to your local machine using the following command:
   ```bash
   git clone https://github.com/NocturnalDevs/tapbats-project.git
   ```

2. **Install Dependencies/Packages**
   Navigate to the project directory and install the required dependencies:
   ```bash
   cd tapbats-project
   npm install
   ```

3. **Navigate to the Frontend**
   Move into the `frontend` directory:
   ```bash
   cd frontend
   ```

4. **Start the Development Server**
   Run the development server using the following command:
   ```bash
   npm run dev
   ```

5. **Open the Local Port in Your Browser**
   Once the server is running, open your browser and navigate to the local port (likely `http://localhost:5173`).

---

## Running the Game on Telegram

To run the game on Telegram, follow these steps:

1. **Install ngrok**
   Download and install ngrok from [ngrok's official website](https://ngrok.com/).

2. **Run ngrok to Expose Your Local Port**
   Start ngrok and expose the local port your game is running on (e.g., 5173):
   ```bash
   ngrok http 5173
   ```

3. **Open BotFather on Telegram**
   Open Telegram and search for `BotFather`. Type `/myapps` to manage your bots.

4. **Select the TapBats Web App**
   Find the TapBats bot in your list of apps and select it.

5. **Edit the Web App URL**
   Choose the option to **Edit Web App URL**.

6. **Update the Web App URL**
   Copy the URL generated by ngrok (e.g., `https://abcd1234.ngrok.io`) and send it to BotFather to update the web app URL.

---

## Setting Up the Backend

1. **Navigate to the Backend Directory**
   Open a terminal and navigate to the `backend` directory of the project:
   ```bash
   cd tapbats-project/backend
   ```

2. **Create a Virtual Environment**
   Create a new virtual environment (venv) to isolate the backend dependencies:
   ```bash
   python -m venv myenv
   ```

3. **Activate the Virtual Environment**
   Activate the virtual environment:
   ```bash
   myenv\Scripts\activate
   ```

4. **Install Required Python Packages**
   Install the dependencies listed in the `requirements.txt` file:
   ```bash
   pip install -r requirements.txt
   ```

5. **Set Up Environment Variables**
   Create a `.env` file in the `backend` directory to store sensitive or machine-specific configurations (e.g., database connection details):
   ```bash
   touch .env
   ```

   Add the following content to the `.env` file (replace the values with your actual database credentials):
   ```plaintext
   DATABASE_URL=postgresql://postgres:yourpassword@localhost:5432/telegram_game_db
   ```

6. **Run the Backend Server**
   Start the FastAPI backend server:
   ```bash
   uvicorn main:app --reload
   ```

   The backend will be available at `http://localhost:8000`. You can explore the API documentation at:  
   ```bash
   http://localhost:8000/docs
   ```

7. **Update requirements.txt (Optional)**
   When new packages are added to the project, update the requirements.txt file by running: 
   ```bash
   pip freeze > requirements.txt
   ```
---

### Notes:
- **Virtual Environment**: Always activate the virtual environment (`myenv`) before running the backend server.
- **PostgreSQL**: Ensure PostgreSQL is installed and running on your machine, and the database (`tapbats_db`) is created.
- **Environment Variables**: Use the `.env` file to manage sensitive configurations like database URLs.

---

## Git Workflow for Development and Deployment

To manage changes between your **development device** and **deployment device**, follow this Git workflow:

### **Development Device**
1. **Stage Changes**:
   ```bash
   git add .
   ```

2. **Commit Changes**:
   ```bash
   git commit -m "Your commit message"
   ```

3. **Push to `develop` Branch**:
   ```bash
   git push origin develop
   ```

### **Deployment Device**
4. **Pull from `develop` Branch**:
   ```bash
   git pull origin develop
   ```

### **Optional: Merge `develop` into `main`**
5. **Switch to `main` Branch**:
   ```bash
   git checkout main
   ```

6. **Merge `develop` into `main`**:
   ```bash
   git merge develop
   ```

7. **Push `main` Branch**:
   ```bash
   git push origin main
   ```

### **Deployment Device (Again)**
8. **Pull from `main` Branch**:
   ```bash
   git pull origin main
   ```

---

## Notes
- Use the `develop` branch for ongoing development and testing.
- Use the `main` branch for stable, deployable code.
- Always **pull before pushing** to avoid conflicts.
